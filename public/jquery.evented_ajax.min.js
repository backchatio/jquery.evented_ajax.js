/**
 * @author Adam Burmister <adam@mojolly.com>
 * @copyright Mojolly.com <team@mojolly.com>
 */
(function(a){a.extend({futureOptions:{notificationElement:a("body"),futureTimeout:10000,onFutureTimeout:a.noop,successEvents:[],success:a.noop,errorEvents:[],error:a.noop,clientMsgId:"undefined"},futureSetup:function(b){a.extend(a.futureOptions,b)},future:function(c){c=a.extend(true,{},a.futureOptions,c);c.successEvents=a.isArray(c.successEvents)?c.successEvents:[c.successEvents];c.errorEvents=a.isArray(c.errorEvents)?c.errorEvents:[c.errorEvents];var f="."+c.clientMsgId;var b=a.merge([],c.successEvents);b=a.merge(b,c.errorEvents);var e="";for(var d=0;d<b.length;d++){e+=b[d]+f+" "}e=e.trim();var g=setTimeout(function(){c.onFutureTimeout();c.notificationElement.unbind(f)},c.futureTimeout);c.notificationElement.bind(e,function(i,h){if(""+i.namespace!==""+c.clientMsgId){return}clearTimeout(g);c.notificationElement.unbind(f);if(a.inArray(i.type,c.successEvents)!==-1){c.success(i,h)}else{if(a.inArray(i.type,c.errorEvents)!==-1){c.error(i,h)}}c.notificationElement.trigger(i.type,h)})},eventedAjax:function(c,d){var b=""+(new Date).valueOf();a.future(a.extend(true,{clientMsgId:b},d));a.ajax(a.extend(true,{data:{clientMsgId:b}},c))}})})(jQuery);